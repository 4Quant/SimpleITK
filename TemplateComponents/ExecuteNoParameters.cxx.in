Image ${name}::Execute ( $(include ImageParameters.in)$(include InputParameters.in) )
{

  PixelIDValueType type = image1.GetPixelIDValue();
  unsigned int dimension = image1.GetDimension();

  $(for inum=2,number_of_inputs do
           OUT= OUT .. '\n    if ( type != image' .. inum .. '.GetPixelIDValue() || dimension != image' .. inum .. '.GetDimension() ) { sitkExceptionMacro ( "Image' .. inum .. ' for ${name} doesnt match type or dimension!" ); }'
             end)

    return this->m_MemberFactory->GetMemberFunction( type, dimension )( $(for inum=1,number_of_inputs do
  if inum>1 then
    OUT=OUT .. ', '
  end
  OUT= OUT .. 'image' .. inum
  end
  if inputs then
    for inum=1,#inputs do
      if number_of_inputs>0 or inum>1 then
        OUT = OUT .. ", "
      end
      OUT=OUT..inputs[inum].name:sub(1,1):lower() .. inputs[inum].name:sub(2,-1)
    end
  end) );
}
